{"ast":null,"code":"import HeadTitle from \"@/components/MainBody/HeadTitle\";\nexport default {\n  name: \"ReadText\",\n  components: {\n    HeadTitle\n  },\n  data() {\n    return {\n      Content: {},\n      book: {},\n      time: 0,\n      ReadTime: \"\",\n      clocks: true\n    };\n  },\n  created() {\n    this.time = new Date().getTime();\n    this.GetContent();\n  },\n  methods: {\n    clock() {\n      var d = new Date().getTime();\n      this.ReadTimes(this.time, d);\n      this.$axios.post('public/TextClock', {\n        idBook: this.$route.query.idBook,\n        contentId: this.$route.query.id,\n        token: this.$store.state.Authorization,\n        readTime: this.ReadTime,\n        sorce: 1\n      }, {\n        headers: {\n          'Authorization': this.$store.state.Authorization\n        }\n      }).then(resp => {\n        if (resp.status === 200) {\n          this.$message({\n            message: '打卡成功，获得1积分',\n            type: 'success'\n          });\n          this.$router.go(0);\n          // this.number = resp.data.data\n        }\n      }).catch(resp => {});\n    },\n    ReadTimes(beginTime, endTime) {\n      var dateBegin = new Date(beginTime);\n      var dateEnd = new Date(endTime);\n      var dateDiff = dateEnd.getTime() - dateBegin.getTime(); //时间差的毫秒数\n      var dayDiff = Math.floor(dateDiff / (24 * 3600 * 1000)); //计算出相差天数\n      var leave1 = dateDiff % (24 * 3600 * 1000); //计算天数后剩余的毫秒数\n      var hours = Math.floor(leave1 / (3600 * 1000)); //计算出小时数\n      //计算相差分钟数\n      var leave2 = leave1 % (3600 * 1000); //计算小时数后剩余的毫秒数\n      var minutes = Math.floor(leave2 / (60 * 1000)); //计算相差分钟数\n      //计算相差秒数\n      var leave3 = leave2 % (60 * 1000); //计算分钟数后剩余的毫秒数\n      var seconds = Math.round(leave3 / 1000);\n      this.ReadTime = dayDiff + \"天\" + hours + \"小时\" + minutes + \"分钟\" + seconds + \"秒\";\n    },\n    GetContent() {\n      this.$axios.post('public/SelectClock', {\n        idBook: this.$route.query.idBook,\n        contentId: this.$route.query.id,\n        token: this.$store.state.Authorization,\n        readTime: this.ReadTime\n      }, {\n        headers: {\n          'Authorization': this.$store.state.Authorization\n        }\n      }).then(resp => {\n        if (resp.status === 200) {\n          if (resp.data.data.length >= 1) {\n            this.clocks = false;\n          }\n        }\n      }).catch(resp => {});\n      this.$axios.post('public/GetContent', {\n        id_book: this.$route.query.idBook,\n        id: this.$route.query.id\n      }, {\n        headers: {\n          'Authorization': this.$store.state.Authorization\n        }\n      }).then(resp => {\n        if (resp.status === 200) {\n          this.Content = resp.data.data;\n          // this.number = resp.data.data\n        }\n      }).catch(resp => {});\n      this.$axios.post('public/OneBook', {\n        id_book: this.$route.query.idBook\n      }, {\n        headers: {\n          'Authorization': this.$store.state.Authorization\n        }\n      }).then(resp => {\n        if (resp.status === 200) {\n          this.book = resp.data.data;\n          // this.number = resp.data.data\n        }\n      }).catch(resp => {});\n    }\n  }\n};","map":{"version":3,"names":["HeadTitle","name","components","data","Content","book","time","ReadTime","clocks","created","Date","getTime","GetContent","methods","clock","d","ReadTimes","$axios","post","idBook","$route","query","contentId","id","token","$store","state","Authorization","readTime","sorce","headers","then","resp","status","$message","message","type","$router","go","catch","beginTime","endTime","dateBegin","dateEnd","dateDiff","dayDiff","Math","floor","leave1","hours","leave2","minutes","leave3","seconds","round","length","id_book"],"sources":["src/components/MainBody/ReadText.vue"],"sourcesContent":["<template>\n    <div class=\"main_body\">\n        <HeadTitle></HeadTitle>\n        <div class=\"head_picture\">\n        </div>\n        <div class=\"content row\">\n\n            <div class=\"sub_right\">\n                <div class=\"bread fs14\">\n                    <a href=\"/ReadPage\">阅读打卡</a>\n                    -\n                    <span>{{book.nameBook}}</span>\n                    &nbsp;-&nbsp;\n                    <span>正文</span>\n                </div>\n                <div class=\"page_content\">\n                    <div class=\"page_title\">\n                        <h3 class=\"fs24\">{{Content.catalog}}</h3>\n                    </div>\n                </div>\n                <div class=\"newsDetailOneP\">\n                    {{book.author}}<i></i>&nbsp;&nbsp;&nbsp;&nbsp;\n                </div>\n                \n                <div style=\"margin-top: 50px\">\n                    <div class=\"lists\" >\n                        <div class=\"ql-editor\" v-html=\"Content.content\"></div>\n                    </div>\n                </div>\n                \n                <div style=\"width: 100px;margin:50px auto\">\n                    <el-button type=\"primary\" @click=\"clock()\" v-if=\"this.clocks\">打卡</el-button>\n                    <el-button type=\"success\" disabled v-if=\"!this.clocks\">已打卡</el-button>\n                </div>\n                <div class=\"bottoms\"></div>\n            </div>\n        </div>\n    \n    \n    </div>\n</template>\n\n<script>\n    import HeadTitle from \"@/components/MainBody/HeadTitle\";\n    export default {\n        name: \"ReadText\",\n        components: {HeadTitle},\n        data() {\n            return {\n                Content:{},\n                book:{},\n                time:0,\n                ReadTime:\"\",\n                clocks: true\n            }\n        },\n        created(){\n            this.time = new Date().getTime()\n            this.GetContent()\n        },\n        \n        methods:{\n          clock(){\n              var d = new Date().getTime();\n              this.ReadTimes(this.time,d)\n              this.$axios.post('public/TextClock', {\n                  idBook: this.$route.query.idBook,\n                  contentId: this.$route.query.id,\n                  token: this.$store.state.Authorization,\n                  readTime: this.ReadTime,\n                  sorce:1,\n              }, {\n                  headers: {'Authorization': this.$store.state.Authorization}\n              }).then(resp => {\n                  if (resp.status === 200) {\n                      this.$message({\n                          message: '打卡成功，获得1积分',\n                          type: 'success'\n                      });\n                      this.$router.go(0);\n                      // this.number = resp.data.data\n\n                  }\n              }).catch(resp => {\n              })\n          },\n          ReadTimes (beginTime, endTime) {\n                var dateBegin = new Date(beginTime);\n                var dateEnd = new Date(endTime);\n                var dateDiff = dateEnd.getTime() - dateBegin.getTime();//时间差的毫秒数\n                var dayDiff = Math.floor(dateDiff / (24 * 3600 * 1000));//计算出相差天数\n                var leave1 = dateDiff % (24 * 3600 * 1000);    //计算天数后剩余的毫秒数\n                var hours = Math.floor(leave1 / (3600 * 1000));//计算出小时数\n                //计算相差分钟数\n                var leave2 = leave1 % (3600 * 1000);   //计算小时数后剩余的毫秒数\n                var minutes = Math.floor(leave2 / (60 * 1000)); //计算相差分钟数\n                //计算相差秒数\n                var leave3 = leave2 % (60 * 1000);     //计算分钟数后剩余的毫秒数\n                var seconds = Math.round(leave3 / 1000);\n                this.ReadTime = dayDiff + \"天\" + hours + \"小时\" + minutes + \"分钟\" + seconds + \"秒\";\n            },\n\n\n          GetContent(){\n\n              this.$axios.post('public/SelectClock', {\n                  idBook: this.$route.query.idBook,\n                  contentId: this.$route.query.id,\n                  token: this.$store.state.Authorization,\n                  readTime: this.ReadTime,\n              }, {\n                  headers: {'Authorization': this.$store.state.Authorization}\n              }).then(resp => {\n                  if (resp.status === 200) {\n                      \n                      if(resp.data.data.length >= 1){\n                          this.clocks = false\n                      }\n\n                  }\n              }).catch(resp => {\n              })\n              this.$axios.post('public/GetContent', {\n                  id_book: this.$route.query.idBook,\n                  id: this.$route.query.id\n              }, {\n                  headers: {'Authorization': this.$store.state.Authorization}\n              }).then(resp => {\n                  if (resp.status === 200) {\n                      this.Content = resp.data.data\n                      // this.number = resp.data.data\n\n                  }\n              }).catch(resp => {\n              })\n              this.$axios.post('public/OneBook', {\n                  id_book: this.$route.query.idBook,\n              }, {\n                  headers: {'Authorization': this.$store.state.Authorization}\n              }).then(resp => {\n                  if (resp.status === 200) {\n                      this.book = resp.data.data\n                      // this.number = resp.data.data\n\n                  }\n              }).catch(resp => {\n              })\n          }\n          \n        }\n    }\n</script>\n\n<style scoped>\n    @import '../editor.css';\n    .main_body{\n        margin: 0;\n        padding: 0;\n        height: 100%;\n        width: 100%;\n    }\n    .head_picture{\n        height: 250px;\n        width: 100%;\n        background: url(\"http://rcqmzsxxw.com/rchema/xuexiwang/img/public/head_bg.png\");\n        /*background: url(\"https://api.ixiaowai.cn/gqapi/gqapi.php\");*/\n        background-size: cover;\n    }\n\n    .content {\n        position: relative;\n        z-index: 2;\n    }\n    \n    .row {\n        width: 1500px;\n        margin: 0 auto;\n    }\n\n    .sub_menu > li > a {\n        display: block;\n        line-height: 36px;\n        color: #333;\n        padding: 17px 0 16px 30px;\n        position: relative;\n        border: 1px solid #ededed;\n        border-top: 0;\n    }\n    .sub_right {\n        margin: 0 0 0 30px;\n        background: #FFFFFF;\n    }\n    .page_content {\n        padding: 0 0 0 40px;\n        clear: right;\n        background: #fff;\n    }\n    .page_title {\n        padding: 0 0 0;\n        overflow: hidden;\n    }\n    .page_title h3 {\n        padding: 25px 0;\n        color: #333;\n        text-align: center;\n    }\n    .fs24 {\n        font-size: 27px;\n    }\n    \n    .lists{\n        font-size: 23px;\n        line-height: 35px;\n    }\n    \n  \n    .bread {\n        color: #a6a6a6;\n        line-height: 40px;\n        text-align: right;\n        padding: 0 20px;\n        background: #f7f7f7;\n        margin-left: 20px;\n    }\n    .fs14 {\n        font-size: 14px;\n    }\n\n    .bottoms{\n        height: 20px;\n    }\n    .newsDetailOneP {\n        font-size: 14px;\n        color: #969696;\n        padding-bottom: 17px;\n        border-bottom: 1px solid #d5d9dc;\n        text-align: center;\n    }\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}