{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapMutations } from \"vuex\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      view: \"0\",\n      telephoneForm: {\n        telephone: \"\",\n        password: \"\",\n        checked: false\n      },\n      phoneForm: {\n        telephone: \"\",\n        verification: \"\",\n        checked: false\n      },\n      rules: {\n        password: [{\n          required: true,\n          message: \"密码不能为空\"\n        }],\n        telephone: [{\n          required: true,\n          message: \"手机不能为空\"\n        }],\n        verification: [{\n          required: true,\n          message: \"验证码不能为空\"\n        }]\n      }\n    };\n  },\n  created() {\n    localStorage.clear();\n    this.$store.commit(\"init\");\n  },\n  methods: {\n    ...mapMutations([\"setToken\"]),\n    login(form) {\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          this.$axios.post(\"/login\", {\n            telephone: this.telephoneForm.telephone,\n            email: this.telephoneForm.telephone,\n            password: this.telephoneForm.password\n          }).then(resp => {\n            if (resp.data.code === 400) {\n              this.$message({\n                type: 'warning',\n                message: resp.data.message\n              });\n            } else {\n              this.$message({\n                message: resp.data.message,\n                type: 'success'\n              });\n              this.setToken({\n                Authorization: resp.data.data.token\n              });\n              this.$router.push(\"/FirstPage\");\n            }\n          }).catch(resp => {\n            console.log(resp);\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["mapMutations","name","data","view","telephoneForm","telephone","password","checked","phoneForm","verification","rules","required","message","created","localStorage","clear","$store","commit","methods","login","form","$refs","validate","valid","$axios","post","email","then","resp","code","$message","type","setToken","Authorization","token","$router","push","catch","console","log"],"sources":["src/components/Login/login.vue"],"sourcesContent":["<template>\n  <!--  登录-->\n  <div\n    id=\"login\"\n    style=\"position: fixed;\n                overflow: hidden;\n                top: 0;\n                left: 0;\n                overflow-y: auto;\n                background-size: 100% 100%;\n                height: 100%;\n                width: 100%;\n                background-image: url('https://file-ehall.cqut.edu.cn/imageserver/100005/ump/images/2021/07/09/1625817649670edWyTBN.png')\"\n  >\n    <!--        普通登录-->\n    <el-dialog\n      :visible=\"view !== '2'\"\n      :show-close=\"false\"\n      :modal-append-to-body=\"false\"\n      top=\"70px\"\n      width=\"480px\"\n      style=\"margin: 0.8rem auto 0.64rem;\"\n    >\n      <div\n        slot=\"title\"\n        style=\"background: #FFF;\n                        width: 480px;\n                        box-shadow: 0 3px 5px rgba(0,0,0,.2);\"\n      >\n        <el-tabs :value=\"view\">\n          <el-tab-pane name=\"0\" label=\"手机登录\">\n            <el-form\n              ref=\"telephoneForm\"\n              :model=\"telephoneForm\"\n              :rules=\"rules\"\n              style=\"padding: 0 30px 60px;\"\n            >\n              <el-form-item\n                prop=\"telephone\"\n                style=\"position: relative;\n                                                margin-bottom: 24px;\n                                                height: 64px;\n                                                line-height: 64px;\n                                                border-radius: 4px;\n                                                border: 1px solid rgba(226,230,237,1);\n                                                box-sizing: border-box;\n                                                transition: border .3s;\"\n              >\n                <el-input\n                  @keyup.enter.native=\"login('telephoneForm')\"\n                  placeholder=\"手机号/邮箱\"\n                  clearable\n                  v-model=\"telephoneForm.telephone\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item\n                prop=\"password\"\n                style=\"position: relative;\n                                        margin-bottom: 24px;\n                                        height: 64px;\n                                        border-radius: 4px;\n                                        border: 1px solid rgba(226,230,237,1);\n                                        box-sizing: border-box;\n                                        transition: border .3s;\"\n              >\n                <el-input\n                  @keyup.enter.native=\"login('telephoneForm')\"\n                  placeholder=\"密码\"\n                  clearable\n                  show-password\n                  v-model=\"telephoneForm.password\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item style=\"margin-bottom: 0;\">\n                <div\n                  style=\"padding: 20px 0;\n                                                font-size: 12px;\n                                                height: 24px;\n                                                width: 100%;\n                                                line-height: 24px;\n                                                display: flex;\n                                                justify-content: space-between;\n                                                align-items: center\"\n                >\n                  <el-checkbox\n                    class=\"rememberPassword\"\n                    type=\"checkBox\"\n                    v-model=\"telephoneForm.checked\"\n                    c\n                  >\n                    <span style=\"font-size: 12px;margin-left: -4px;\"\n                      >下次自动登录</span\n                    >\n                  </el-checkbox>\n                  \n                </div>\n              </el-form-item>\n              <el-form-item\n                style=\"display: block;\n                                                height: 50px;\n                                                line-height: 50px;\n                                                background: #32BAF0;\n                                                text-align: center;\n                                                border-radius: 3px;\n                                                color: #fff;\n                                                font-size: 16px;\n                                                margin: 25px 0 0 0;\"\n              >\n                <el-button\n                  @click=\"login('telephoneForm')\"\n                  style=\"width: 100%;line-height: 50px;padding: 0;font-size: 16px\"\n                  type=\"primary\"\n                  >登录\n                </el-button>\n              </el-form-item>\n              <el-form-item\n                style=\"padding: 4px 0;\n                                                text-align: right;\n                                                margin: 0;\"\n              >\n                <router-link to=\"/register\">\n                  <span class=\"str1\" style=\"color:grey\">还没有账号? </span>\n                  <span class=\"str2\" style=\"color:blue\">去注册</span>\n                </router-link>\n              </el-form-item>\n            </el-form>\n\n          </el-tab-pane>\n          \n        </el-tabs>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from \"vuex\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      view: \"0\",\n      telephoneForm: {\n        telephone: \"\",\n        password: \"\",\n        checked: false\n      },\n      phoneForm: {\n        telephone: \"\",\n        verification: \"\",\n        checked: false\n      },\n      rules: {\n        password: [{ required: true, message: \"密码不能为空\" }],\n        telephone: [\n          { required: true, message: \"手机不能为空\" },\n        ],\n        verification: [{ required: true, message: \"验证码不能为空\" }]\n      }\n    };\n  },\n  created() {\n    localStorage.clear();\n    this.$store.commit(\"init\");\n  },\n  methods: {\n    ...mapMutations([\"setToken\"]),\n    login(form) {\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          this.$axios\n            .post(\"/login\", {\n              telephone: this.telephoneForm.telephone,\n              email: this.telephoneForm.telephone,\n              password: this.telephoneForm.password\n            })\n            .then(resp => {\n                if (resp.data.code === 400) {\n                  this.$message({\n                    type: 'warning',\n                    message: resp.data.message\n                  });\n                }else {\n                  this.$message({\n                    message: resp.data.message,\n                    type: 'success'\n                  });\n                  this.setToken({ Authorization: resp.data.data.token });\n                  this.$router.push(\"/FirstPage\");\n                }\n            })\n            .catch(resp => {\n              console.log(resp);\n            });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style>\n#login .el-dialog__header,\n.el-dialog__body {\n  padding: 0 !important;\n}\n\n#login .el-tabs__nav-scroll {\n  height: 35px !important;\n  padding-top: 47px;\n  padding-left: 41px;\n  padding-bottom: 58px;\n  border: none;\n  font-size: 20px;\n}\n\n#login .el-tabs__header {\n  padding: 0;\n  position: relative;\n  line-height: 0 !important;\n  margin: 0 !important;\n  border: 0 !important;\n  outline: none !important;\n}\n\n#login .el-tabs__nav-wrap::after,\n.el-tabs__active-bar {\n  height: 0 !important;\n}\n\n#login .el-input__inner {\n  height: 64px !important;\n}\n\n#login .el-form-item__content {\n  height: 100% !important;\n}\n\n#login .el-tabs__item {\n  margin-top: -3px;\n  font-size: 16px;\n  padding-right: 10px;\n}\n\n#login .el-tabs__item:hover {\n  color: rgba(59, 61, 69, 1) !important;\n}\n\n#login .el-tabs__item.is-active {\n  font-size: 26px;\n  font-weight: 500;\n  color: rgba(59, 61, 69, 1) !important;\n  padding-right: 10px;\n}\n\n#login .el-form-item__error {\n  left: auto;\n  right: 0;\n}\n\n#verification .el-form-item__error {\n  left: 90px;\n}\n\n#login .el-input {\n  font-size: 16px !important;\n}\n\n.login-logo{\n  height: 80px;\n  width: 100%;\n  position: relative;\n  color: #fff;\n  font-size: .32rem;\n  padding-left: 0.24rem;\n  margin-left: 0.24rem;\n  vertical-align: middle;\n}\n\n</style>\n"],"mappings":";AAyIA,SAAAA,YAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,aAAA;QACAC,SAAA;QACAC,QAAA;QACAC,OAAA;MACA;MACAC,SAAA;QACAH,SAAA;QACAI,YAAA;QACAF,OAAA;MACA;MACAG,KAAA;QACAJ,QAAA;UAAAK,QAAA;UAAAC,OAAA;QAAA;QACAP,SAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;QAAA,EACA;QACAH,YAAA;UAAAE,QAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,YAAA,CAAAC,KAAA;IACA,KAAAC,MAAA,CAAAC,MAAA;EACA;EACAC,OAAA;IACA,GAAAlB,YAAA;IACAmB,MAAAC,IAAA;MACA,KAAAC,KAAA,CAAAD,IAAA,EAAAE,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAC,MAAA,CACAC,IAAA;YACApB,SAAA,OAAAD,aAAA,CAAAC,SAAA;YACAqB,KAAA,OAAAtB,aAAA,CAAAC,SAAA;YACAC,QAAA,OAAAF,aAAA,CAAAE;UACA,GACAqB,IAAA,CAAAC,IAAA;YACA,IAAAA,IAAA,CAAA1B,IAAA,CAAA2B,IAAA;cACA,KAAAC,QAAA;gBACAC,IAAA;gBACAnB,OAAA,EAAAgB,IAAA,CAAA1B,IAAA,CAAAU;cACA;YACA;cACA,KAAAkB,QAAA;gBACAlB,OAAA,EAAAgB,IAAA,CAAA1B,IAAA,CAAAU,OAAA;gBACAmB,IAAA;cACA;cACA,KAAAC,QAAA;gBAAAC,aAAA,EAAAL,IAAA,CAAA1B,IAAA,CAAAA,IAAA,CAAAgC;cAAA;cACA,KAAAC,OAAA,CAAAC,IAAA;YACA;UACA,GACAC,KAAA,CAAAT,IAAA;YACAU,OAAA,CAAAC,GAAA,CAAAX,IAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}