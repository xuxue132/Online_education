{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ValidCode from \"@/components/Login/ValidCode\";\nexport default {\n  name: 'Register',\n  components: {\n    ValidCode\n  },\n  data() {\n    return {\n      view: 1,\n      UserForm: {\n        telephone: '',\n        password: '',\n        checkPassword: '',\n        username: '',\n        school: '',\n        answer: ''\n      },\n      code: '',\n      answerPlus: '',\n      rules: {\n        telephone: [{\n          required: true,\n          message: '手机不能为空'\n        }, {\n          validator: (rule, value, callback) => {\n            const phoneReg = /^1[(34578)][0-9]\\d{8}$/;\n            // const mailboxReg = /^([a-zA-Z]|[0-9])(\\w|\\\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\n            if (phoneReg.test(value) || mailboxReg.test(value)) {\n              callback();\n            } else {\n              callback(new Error('手机格式不对'));\n            }\n          },\n          trigger: 'change'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空'\n        }, {\n          validator: (rule, value, callback) => {\n            if (value.length < 6 || value.length > 12) {\n              callback(new Error('密码太弱，请注意您的账户安全'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'change'\n        }],\n        checkPassword: [{\n          validator: (rule, value, callback) => {\n            if (value === '') {\n              callback(new Error('再次输入密码不能为空'));\n            } else if (value !== this.UserForm.password) {\n              callback(new Error('两次密码不一致'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'change'\n        }],\n        username: [{\n          required: true,\n          message: '姓名不能为空'\n        }],\n        answer: [{\n          required: true,\n          message: '验证码不能为空'\n        }]\n      }\n    };\n  },\n  methods: {\n    validCode() {\n      this.$axios.get('/validCode').then(resp => {\n        if (resp.status === 200) {\n          this.code = resp.data.code;\n          this.answerPlus = resp.data.answerPlus;\n        }\n      }).catch(reason => {});\n    },\n    UserRegister() {\n      this.$refs['UserForm'].validate(valid => {\n        if (valid) {\n          this.$axios.post('/register', {\n            telephone: this.UserForm.telephone,\n            password: this.UserForm.password,\n            username: this.UserForm.username,\n            answer: this.UserForm.answer,\n            answerPlus: this.answerPlus\n          }).then(resp => {\n            if (resp.status === 200) {\n              this.$message({\n                showClose: true,\n                center: true,\n                offset: this.$store.state.tip,\n                message: resp.data.message\n              });\n              this.$router.push('/login');\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["ValidCode","name","components","data","view","UserForm","telephone","password","checkPassword","username","school","answer","code","answerPlus","rules","required","message","validator","rule","value","callback","phoneReg","test","mailboxReg","Error","trigger","length","methods","validCode","$axios","get","then","resp","status","catch","reason","UserRegister","$refs","validate","valid","post","$message","showClose","center","offset","$store","state","tip","$router","push"],"sources":["src/components/Login/Register.vue"],"sourcesContent":["<template>\n  <!--  选择注册-->\n  <div id=\"register\"\n       style=\"position: fixed;\n                    overflow: hidden;\n                    top: 0;\n                    left: 0;\n                    overflow-y: auto;\n                    background-size: 100% 100%;\n                    height: 100%;\n                    width: 100%;\n                    background-image: url('https://www.ketangpai.com/Public/Home/img/reg-bg-01.jpg');\">\n\n    <el-dialog :visible=\"view === 1\" :show-close=\"false\" width=\"480px\" :modal=\"false\"\n               top=\"35px\" destroy-on-close>\n      <div>\n        <div style=\"display: flex;padding: 30px 0 0 30px;\">\n          <img @click=\"$router.push('/login')\" alt=\"\" src=\"https://www.ketangpai.com/Public/Home/img/returnReg.png\">\n          <span style=\"line-height: 40px;font-size: 32px;color: #3B3D45;font-weight: 400;margin-left: 22px\">用户注册</span>\n        </div>\n        <div style=\"margin-top: 25px;padding: 0 40px;height: 473px;\">\n          <el-form ref=\"UserForm\" :model=\"UserForm\" :rules=\"rules\">\n            <el-form-item prop=\"telephone\">\n              <el-input placeholder=\"手机\" v-model=\"UserForm.telephone\" clearable></el-input>\n            </el-form-item>\n            <el-form-item prop=\"password\">\n              <el-input placeholder=\"密码\" type=\"password\" v-model=\"UserForm.password\" clearable show-password></el-input>\n            </el-form-item>\n            <el-form-item prop=\"checkPassword\">\n              <el-input placeholder=\"再次输入密码\" type=\"password\" v-model=\"UserForm.checkPassword\" clearable show-password></el-input>\n            </el-form-item>\n            <el-form-item prop=\"username\">\n              <el-input placeholder=\"姓名\" v-model=\"UserForm.username\" clearable></el-input>\n            </el-form-item>\n            <el-form-item prop=\"answer\">\n              <div  style=\"display: flex;\">\n                <el-input placeholder=\"验证码\" v-model=\"UserForm.answer\" clearable></el-input>\n                <div style=\"padding-left: 10px\">\n                  <ValidCode :info=\"{code}\" @validCode=\"validCode()\"></ValidCode>\n                </div>\n              </div>\n            </el-form-item>\n            <el-form-item class=\"button\">\n              <el-button @click=\"UserRegister\" type=\"primary\"\n                         style=\"margin-top: 18px;\n                                            width: 100%;\n                                            height: 48px;\n                                            border-radius: 3px;\n                                            color: #fff;\n                                            font-size: 16px;\">\n                注册\n              </el-button>\n            </el-form-item>\n          </el-form>\n          <div @click=\"$router.push('/login')\"\n               style=\"cursor: pointer;margin: 18px 0 0 288px\">\n            <span style=\"color: darkgrey;\">已有账号？</span>\n            <span style=\"color: #32BAF0;\">去登陆</span>\n          </div>\n        </div>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\n  import ValidCode from \"@/components/Login/ValidCode\";\n  export default {\n    name: 'Register',\n    components: {ValidCode},\n    data() {\n      return {\n        view:1,\n        UserForm: {\n          telephone: '',\n          password: '',\n          checkPassword:'',\n          username: '',\n          school: '',\n          answer: '',\n        },\n        code:'',\n        answerPlus:'',\n        rules: {\n          telephone: [\n            {required: true, message: '手机不能为空'},\n            {validator: (rule, value, callback) => {\n                const phoneReg = /^1[(34578)][0-9]\\d{8}$/\n                // const mailboxReg = /^([a-zA-Z]|[0-9])(\\w|\\\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\n                if (phoneReg.test(value) || mailboxReg.test(value)) {\n                  callback();\n                } else {\n                  callback(new Error('手机格式不对'));\n                }\n              }, trigger: 'change'}\n          ],\n          password: [\n            {required: true, message: '密码不能为空'},\n            {validator: (rule, value, callback) => {\n                if (value.length < 6 || value.length > 12) {\n                  callback(new Error('密码太弱，请注意您的账户安全'))\n                } else {\n                  callback();\n                }\n              }, trigger: 'change'}\n          ],\n          checkPassword:[\n            {validator: (rule, value, callback) => {\n                if (value === '') {\n                  callback(new Error('再次输入密码不能为空'));\n                } else if (value !== this.UserForm.password ) {\n                  callback(new Error('两次密码不一致'));\n                } else {\n                  callback();\n                }\n              }, trigger: 'change'}\n          ],\n          username: [\n            {required: true, message: '姓名不能为空'}\n          ],\n          \n          answer: [\n            {required: true, message: '验证码不能为空'}\n          ]\n        },\n      }\n    },\n    methods: {\n      validCode(){\n        this.$axios.get('/validCode').then(resp => {\n          if (resp.status === 200){\n            this.code = resp.data.code\n            this.answerPlus = resp.data.answerPlus\n          }\n        }).catch(reason => {\n        })\n      },\n      UserRegister() {\n        this.$refs['UserForm'].validate((valid) => {\n          if (valid) {\n            this.$axios.post('/register', {\n              telephone: this.UserForm.telephone,\n              password: this.UserForm.password,\n              username: this.UserForm.username,\n              answer:this.UserForm.answer,\n              answerPlus:this.answerPlus\n            }).then(resp => {\n              if (resp.status === 200) {\n                this.$message({\n                  showClose: true,\n                  center: true,\n                  offset: this.$store.state.tip,\n                  message: resp.data.message\n                })\n                  this.$router.push('/login');\n              }\n            })\n          }\n        });\n      },\n    },\n  }\n</script>\n\n<style>\n  #register .el-dialog__header, .el-dialog__body {\n    padding: 0 !important;\n  }\n  \n  #register .el-tabs__nav-scroll {\n    height: 35px !important;\n    padding-top: 47px;\n    padding-left: 41px;\n    padding-bottom: 58px;\n    border: none;\n    font-size: 20px;\n  }\n  \n  #register a {\n    display: block;\n    width: 330px;\n    font-size: 16px;\n    color: #fff;\n    height: 64px;\n    line-height: 64px;\n    text-align: center;\n    background: #32BAF0;\n    border-radius: 4px;\n    position: relative;\n    left: 70px;\n    bottom: 67px;\n    margin:3px 0 0 20px;\n    cursor: pointer;\n  }\n  \n  #register .el-input__inner {\n    margin-bottom: 12px;\n    height: 48px;\n    line-height: 48px;\n  }\n  \n  #register .el-form-item{\n    margin-bottom: 0;\n  }\n  \n  #register .el-form-item__error {\n    margin-top: -16px;\n    left: auto;\n    right: 0;\n  }\n  \n  #register .el-input{\n    font-size: 16px!important;\n  }\n</style>\n"],"mappings":";AAmEA,OAAAA,SAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,IAAA;MACAC,QAAA;QACAC,SAAA;QACAC,QAAA;QACAC,aAAA;QACAC,QAAA;QACAC,MAAA;QACAC,MAAA;MACA;MACAC,IAAA;MACAC,UAAA;MACAC,KAAA;QACAR,SAAA,GACA;UAAAS,QAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,MAAAC,QAAA;YACA;YACA,IAAAA,QAAA,CAAAC,IAAA,CAAAH,KAAA,KAAAI,UAAA,CAAAD,IAAA,CAAAH,KAAA;cACAC,QAAA;YACA;cACAA,QAAA,KAAAI,KAAA;YACA;UACA;UAAAC,OAAA;QAAA,EACA;QACAlB,QAAA,GACA;UAAAQ,QAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,IAAAD,KAAA,CAAAO,MAAA,QAAAP,KAAA,CAAAO,MAAA;cACAN,QAAA,KAAAI,KAAA;YACA;cACAJ,QAAA;YACA;UACA;UAAAK,OAAA;QAAA,EACA;QACAjB,aAAA,GACA;UAAAS,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,IAAAD,KAAA;cACAC,QAAA,KAAAI,KAAA;YACA,WAAAL,KAAA,UAAAd,QAAA,CAAAE,QAAA;cACAa,QAAA,KAAAI,KAAA;YACA;cACAJ,QAAA;YACA;UACA;UAAAK,OAAA;QAAA,EACA;QACAhB,QAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;QAAA,EACA;QAEAL,MAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAW,OAAA;IACAC,UAAA;MACA,KAAAC,MAAA,CAAAC,GAAA,eAAAC,IAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAC,MAAA;UACA,KAAArB,IAAA,GAAAoB,IAAA,CAAA7B,IAAA,CAAAS,IAAA;UACA,KAAAC,UAAA,GAAAmB,IAAA,CAAA7B,IAAA,CAAAU,UAAA;QACA;MACA,GAAAqB,KAAA,CAAAC,MAAA,KACA;IACA;IACAC,aAAA;MACA,KAAAC,KAAA,aAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAV,MAAA,CAAAW,IAAA;YACAlC,SAAA,OAAAD,QAAA,CAAAC,SAAA;YACAC,QAAA,OAAAF,QAAA,CAAAE,QAAA;YACAE,QAAA,OAAAJ,QAAA,CAAAI,QAAA;YACAE,MAAA,OAAAN,QAAA,CAAAM,MAAA;YACAE,UAAA,OAAAA;UACA,GAAAkB,IAAA,CAAAC,IAAA;YACA,IAAAA,IAAA,CAAAC,MAAA;cACA,KAAAQ,QAAA;gBACAC,SAAA;gBACAC,MAAA;gBACAC,MAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAC,GAAA;gBACA/B,OAAA,EAAAgB,IAAA,CAAA7B,IAAA,CAAAa;cACA;cACA,KAAAgC,OAAA,CAAAC,IAAA;YACA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}